<ion-content style="background:#f7f7f7;">

    <div ion-fixed class="bgdheader" style="width:100%;color:#fff; padding:10px;" >
      <table width="100%" border="0">
        <tr>
          <td style="width:20%;"> <div style="font-size:20px; margin-left:10px;" (click) = "openMenu();"> <img src="assets/img/menu_white.png" width="20px" height="20px"> </div> </td>
          <td style="width:45%; font-size:18px; text-align:center;">Profile</td>
          <td style="width:35%; text-align: right; padding-right:10px;">
            <span (click) = "themeSettings();"><img src="assets/img/brush.png" width="25px;" height="25px"></span> &nbsp; &nbsp;                             
            <span (click) = "logout();" ><img src="assets/img/logout.png" width="25px" height="25px"></span>
          </td>
        </tr>
      </table>
    </div>
  
    <div class="bgdheader" style="height:145px; width:100%; margin-top:33px;"></div>
  
    <div style="margin-left:15px; background:#fff; margin-top:-78px; margin-right:15px; text-align:center; border:1px solid #ddd; border-radius:7px;">
      <div style="margin-top:-45px; ">
        <img src="{{ photo }}" (click)="uploadUserProfilePhoto();" width="90px" height="90px" style="border-radius:50%;">
      </div>

      <div style="margin-top:10px;"><b>{{ dataProfile?.fullname }}</b></div>
      <div style="padding-bottom:5px; font-size: 12px;">@ {{ dataProfile?.mobile }}</div>

      <div style="padding-top:10px; padding-bottom:7px;">
        <table width="100%">
          <tr>
            <td width="33%">
              <div>
                <div style="font-size:16px;">{{ dataProfile?.rank }}</div>
                <div style="color:#969FAA; font-size:12px;">RANK</div>                
              </div>
            </td>

            <td width="34%">
              <div>
                <div style="font-size:16px;">{{ dataProfile?.currentLevel }}</div>
                <div style="color:#969FAA; font-size:12px;">TOTAL LEVELS</div>                
              </div>
            </td>

            <td width="33%">
              <div>
                <div style="font-size:16px;">{{ dataProfile?.totalCoins }}</div>
                <div style="color:#969FAA; font-size:12px;">COINS</div>                
              </div>
            </td>            
          </tr>
        </table>
      </div>
  
      <div style="text-align:center; margin-left:15px; margin-right:15px;">
        <table width="100%" style="border-top:1px solid #ddd;">
          <tr>
            <td style="width:25%">
              <div style="font-size:20px; margin-top:5px; margin-bottom:5px; border-right:1px solid #dddddd;" (click)="userProfile();" ><img src="assets/img/profile_user.png" width="35px" height="35px"></div>
            </td>
            <td style="width:25%">
              <div style="font-size:20px; margin-top:5px; margin-bottom:5px; border-right:1px solid #ddd;" (click)="transactionHistory();"><img src="assets/img/trans_history.png" width="30px" height="30px"></div>              
            </td>
            <td style="width:25%">
              <div style="font-size:20px; margin-top:5px; margin-bottom:5px; border-right:1px solid #ddd;" (click)="subscriptionHistory();"><img src="assets/img/subsc_history.png" width="21px" height="22px"></div>              
            </td>
            <td style="width:25%">
              <div style="font-size:20px; margin-top:5px; margin-bottom:5px;" (click)="inviteFriends();" ><img src="assets/img/invite_friend.png" width="25px" height="25px"></div>              
            </td>                                    
          </tr>
        </table>
      </div>
  
    </div>

    <div *ngIf="userProfileStatus" style="margin-top:10px; margin-left:15px; margin-right:15px; margin-bottom: 10px; " >
      <div>
        <div style="background:#ffffff; padding:10px; border-radius:7px; border:1px solid #ddd;">
        <table width="100%" border="0">
          <tr>
            <td width="55%">
              <div style="padding-bottom:12px;">
                <div style="font-size:11px;">Name</div>
                <div>{{ dataProfile?.fullname }}&nbsp;</div>                
              </div>
            </td>
            <td width="45%">
              <div style="padding-bottom:12px;">
                <div style="font-size:11px;">Gender</div>
                <div>{{ dataProfile?.gender }}&nbsp;</div>                
              </div>
              <span style="float:right; margin-top:-50px; font-size:16px;" (click)="gotoEditProfile(dataProfile?.fullname, dataProfile?.mobile2, dataProfile?.dob, dataProfile?.gender, dataProfile?.email, dataProfile?.city, dataProfile?.address,dataProfile?.pincode);" ><ion-icon name="create"></ion-icon></span>
            </td>                                                                                                            
          </tr>

          <tr>
            <td>
              <div style="padding-bottom:12px;">
                <div style="font-size:11px;">Mobile 2</div>
                <div>{{ dataProfile?.mobile2 }}</div>                
              </div>
            </td>
            <td>
              <div style="padding-bottom:12px;">
                <div style="font-size:11px;">DOB</div>
                <div>{{ dataProfile?.myDob }}</div>                
              </div>
            </td>            
          </tr>

          <tr>
            <td colspan="2">
              <div style="padding-bottom:12px;">
                <div style="font-size:11px;">Email</div>
                <div>{{ dataProfile?.email }}</div>                
              </div>
            </td>
          </tr>

          <tr>
            <td colspan="2">
              <div>
                <div style="font-size:11px;">City</div>
                <div>{{ dataProfile?.city }}</div>                
              </div>
            </td>
          </tr>
        </table>
        </div>

        <div style="background:#ffffff; border-radius:7px; border:1px solid #ddd; margin-top:10px;">
          <div style="color:#969FAA; border-bottom:1px solid #dddddd; padding-top:5px; padding-bottom:5px; padding-left:10px; padding-right:10px; font-size:12px; ">EDUCATIONAL DETAILS <span (click)="goToAcademicEdit();" style="float:right; font-size:16px; color:#000000;"><ion-icon name="add"></ion-icon></span></div>
                                                                                                                                                                                                                                                          
          <div *ngIf="qualificationDetailsLength">
            <table width="100%">
              <tr *ngFor = "let qualification of qualificationDetails;">
                <td width="100%" style="padding: 10px; border-top: 1px solid #ddd;">
                  <div style="padding-bottom:5px;">
                    <span>
                      {{ qualification.courseName }}
                    </span>
                    <span style="float:right; color:#969FAA;">
                      {{ qualification.courseYear }}
                    </span>                    
                  </div>
                  <div  style="padding-bottom:5px;">
                    {{ qualification.instituteName }}
                  </div>  
                  <div>
                    Status : <span style="color:#969FAA">{{ qualification.courseStatus }}</span>
                  </div>                
                </td> 
              </tr>
              
            </table>
          </div>

          <div *ngIf="!qualificationDetailsLength" style="color:#d50000; text-align:center; padding:10px;">No Academic Details</div>
        </div>

        <div style="background:#ffffff; border-radius:7px; border:1px solid #ddd; margin-top:10px;">
          <div style="color:#969FAA; border-bottom:1px solid #dddddd; padding-top:5px; padding-bottom:5px; padding-left:10px; padding-right:10px; font-size:12px; ">
            ADD COMPETITIVE EXAM RECORDS (IF ANY) 
            <span (click)="addExam();" style="float:right; font-size:16px; color:#000000;">
              <ion-icon name="add"></ion-icon>
            </span>
          </div>

          <div *ngIf="examDetailsLength">
          <div *ngFor = "let exam of examDetails" style="padding:10px; font-size:12px; border-top:1px solid #dddddd;">
            <table width="100%" border="0">
              <tr>
                <td width="55%">
                  <div>
                    {{ exam.examName }}
                  </div>
                </td>
                <td width="45%" style="text-align:right;">
                  {{ exam.examDate }}
                </td>
              </tr>                

              <tr>
                <td>{{ exam.marksScored }}</td>
                <td style="text-align: right;">{{ exam.resultStatus }}</td>
              </tr>                
            </table>
          </div>
          </div>

          <div *ngIf="!examDetailsLength" style="color:#d50000; text-align: center; padding:10px;">No exam details</div>
          
        </div>

      </div>
    </div>



    <!-- TRANSACTIONAL HISTORY -->

    <div *ngIf="transactionHistoryStatus" style="margin-top:10px; margin-left:15px; margin-right:15px; margin-bottom: 10px; " >
      <div>
        <div style="background:#ffffff; border-radius:7px; ">

          <div style="padding:10px; ">TRANSACTION HISTORY <span style="float:right;"><img src="assets/img/trans_menu.png" width="15px" height="12px"></span></div>

          <div *ngFor = "let key of keys">
          <div style="background:#f7f7f7; font-size:13px; padding:10px;">{{ key }}</div>
          <div *ngFor = "let s_key of transactionList[key]" style="padding:10px; border-bottom:1px solid #eeeeee;">
            <table width="100%" border="0">
              <tr>
                <td width="12%">
                  <div *ngIf="s_key.transType == 'DAILY LOGIN'"><img src="assets/img/daily_login.png" width="20px" height="20px"></div>
                </td>
                <td width="68%">
                  <div>{{ s_key.transRemark }}</div>
                  <div style="color:#969FAA; font-size:11px;">{{ s_key.transTime }}</div>
                </td>
                <td width="20%">
                  <div *ngIf="s_key.creditCoins != 0 " style="font-size:20px; text-align:right; "><b>{{ s_key.creditCoins }}</b> <img src="assets/img/up_arrow.png" width="15px" height="18px"></div>
                  <div *ngIf="s_key.debitCoins != 0 " style="font-size:20px; text-align:right; "><b>{{ s_key.debitCoins }}</b> <img src="assets/img/down_arrow.png" width="15px" height="18px"></div>                  
                </td>                
              </tr>
            </table>
          </div>
          </div>

        </div>
      </div>
    </div>



    <!-- SUBSCRIPTION HISTORY -->

    <div *ngIf="subscriptionHistoryStatus" style="margin-top:10px; margin-left:15px; margin-right:15px; margin-bottom: 10px; background:#ffffff; border-radius:7px;">
      <div style="padding:10px; text-align:center; border-bottom:1px solid #eeeeee;">SUBSCRIPTION HISTORY</div>
      
      <div style="padding:10px;">
        <table width="100%">
          <tr>
            <td width="60%">
              <div>
                <div>End date : 30 April 2018</div>
                <div>Remaining days : 7</div>
              </div>
            </td>
            <td width="40%">
              <div style="color:#334CE3; text-align:right;" >RENEW</div>
            </td>          
          </tr>
        </table>
      </div>

    </div>


    <!-- INVITE FRIENDS -->

    <div *ngIf="inviteFriendsStatus" style="margin-top:10px; margin-left:15px; margin-right:15px; margin-bottom: 10px; background:#ffffff; border-radius:7px;">
      <div style="text-align:center;">
        <div style="padding-top:25px;">
          <img src="assets/img/boy.png" width="90px" height="90px;">
        </div>

        <div style="margin-top:10px;">Invite a friend</div>

        <div  style="margin-top:10px;">Get 10 coins for each successful invite</div>

        <div style="margin-left:30px; margin-right:30px; margin-top:25px; padding-bottom:25px;">
          <button ion-button (click)="invitationFriend();" style="width:100%; outline: none !important; box-shadow: none !important; background:#fff; color:#000; border:1px solid #dddddd; ">
            <div style="text-align:left; padding-top:7px; padding-bottom:7px; color:#2F7911; font-size: 16px;">INVITE</div>
          </button>

          <button ion-button (click)="friendList();" style="width:100%; outline: none !important; box-shadow: none !important; background:#fff; color:#000; border:1px solid #dddddd; ">
            <div style="text-align:left; padding-top:7px; padding-bottom:7px; color:#2F7911; font-size: 16px;">FRIENDS</div>
          </button>
        </div>

      </div>
      
    </div>

    <div *ngIf="inviteFriendAddStatus" style="margin-top:10px; margin-left:15px; margin-right:15px; margin-bottom: 10px; background:#ffffff; border-radius:7px;">

      <div style="padding-top:25px;">

        <div>
          <div>
            <ion-item-group *ngFor="let group of groupedContacts">
              <ion-item *ngFor="let contact of group.contacts" class="contactlist">
                <ion-label>
                  {{contact.name}}
                  <p>{{contact.number}}</p>
                </ion-label>
                <ion-checkbox item-right (ionChange)="getGroupMember(contact.name, contact.number, $event)" value="contact.number"></ion-checkbox>
              </ion-item>
            </ion-item-group>
          </div>
    
          <div style="padding-bottom:15px;">
            <button ion-button (click)="addInvitationFriend();" style="width:100%; outline: none !important; box-shadow: none !important; background:#13CE66; color:#fff; ">
              <div style="text-align:left; padding-top:7px; padding-bottom:7px; color:#fff; font-size: 16px;">ADD FRIEND</div>
            </button>
          </div>
        </div>

        <!-- <ion-item style="border: 1px solid #ddd;">
          <ion-input [(ngModel)]="name" type="text" placeholder="Name" ></ion-input>
        </ion-item>

        <ion-item style="border: 1px solid #ddd; margin-top:15px;">
          <ion-input [(ngModel)]="mobile" type="number" placeholder="Mobile" ></ion-input>
        </ion-item> -->

        <!-- <div style="text-align:center; margin-top:20px; margin-bottom:10px;">
          <table width="100%" border="0" >
            <tr>
              <td width="50%">
                <div>
                  <div>
                    <img src="assets/img/boy.png" width="60px" height="60px;">
                  </div>
                  <div style="font-size:12px;">MALE</div>
                </div>
              </td>
              <td width="50%" >
                <div>
                  <div>
                    <img src="assets/img/girl.png" width="60px" height="60px;">
                  </div>
                  <div style="font-size:12px;">FEMALE</div>
                </div>
              </td>              
            </tr>
          </table>
        </div> -->

        <!-- <div style="padding-bottom:15px;">
          <button ion-button (click)="addInvitationFriend();" style="width:100%; outline: none !important; box-shadow: none !important; background:#13CE66; color:#fff; ">
            <div style="text-align:left; padding-top:7px; padding-bottom:7px; color:#fff; font-size: 16px;">ADD FRIEND</div>
          </button>
        </div> -->

      </div>
    </div>

    <div *ngIf="invitationListStatus" style="margin-top:10px; margin-left:15px; margin-right:15px; margin-bottom: 10px; border-radius:7px;">
      <div *ngIf="inviteListLength" >

      <div style="background:#ffffff; text-align: center; padding: 5px;">
        <table width="100%">
          <tr>
            <td width="34%">
              <div>
                <div style="color:#0C34F2; font-size:26px;"><b>{{ invitesData?.totalInvites }}</b></div>
                <div style="color:#B8BABD; font-size:13px; ">TOTAL INVITES</div>                
              </div>
            </td>

            <td width="33%">
              <div>
                <div style="color:#F95F62; font-size:26px;"><b>{{ invitesData?.pendingInvites }}</b></div>
                <div style="color:#B8BABD; font-size:13px; ">PENDING</div>                
              </div>
            </td>

            <td width="33%">
              <div>
                <div style="color:#388B17; font-size:26px;"><b>{{ invitesData?.joinedInvites }}</b></div>
                <div style="color:#B8BABD; font-size:13px; ">JOINED</div>                
              </div>
            </td>            
          </tr>
        </table>
      </div>

      <div>
      <div *ngFor="let invitationItem of inviteList;" (click)="invitationItem.status == 'PENDING' && shareRequest();" style="background:#fff; margin-top:10px; margin-bottom:10px; padding:10px;">
        <table width="100%" border="0">
          <tr>
            <td width="20%">
              <div (click)="shareRequest(invitationItem.status);">
                <img src="assets/img/face.png" width="40px" height="40px" style="border-radius:50%;">
              </div>
            </td>

            <td width="60%">
              <div>{{ invitationItem.fullName }}</div>
              <div style="font-size:12px;">{{ invitationItem.mobile }}</div>
            </td>

            <td width="20%">
              <div style="text-align:right;">
                <div *ngIf="invitationItem.status == 'PENDING'" style="color:#F95F62;">{{ invitationItem.status }}</div>
                <div *ngIf="invitationItem.status == 'JOINED'" style="color:#428926;">{{ invitationItem.status }}</div>                
              </div>
            </td>            
          </tr>
        </table>
      </div>

      <div *ngIf="!flag" style="text-align:center; margin-bottom:15px;">
        
        <div *ngIf="isBusy" style="background-color: none; text-align: center;">
          <img src="assets/images/giphy.gif" style="width: 60px; height: 60px;"/>
        </div>
        <button ion-button (click)="loadData(start)" style="width:60%; outline: none !important; box-shadow: none !important; background:#fff; color:#616161; border:1px solid #616161;">Load More</button>
  
      </div>
      </div>
      </div>

      <div *ngIf="!inviteListLength" style="text-align: center; color:#d50000; padding-top:70px; font-size:16px; "><b>No Friends</b></div>

    </div>

  </ion-content>